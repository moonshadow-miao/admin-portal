<template>
  <div class="industries">
    <div class="tag-list">
      <span class="tag label label-info">全部
        <span class="cursor el-icon-close"></span>
      </span>
    </div>
    <div class="tag-panel m-t-10">
      <div class="industry-panel clearfix">
        <span @click="arrowLeft" class="el-icon-caret-left  arrow cursor"></span>
        <span @click="arrowRight" class="el-icon-caret-right arrow cursor"></span>
        <ul class="clearfix" :style="{left:(moveDistance + 'px'),width:(maxLength * EACH_WIDTH + 'px')}">
          <li class="fl" v-for="(industry,index) in industries" :key="industry.parentId"
              :class="{active:index=== industrySelect}">
            <span @click="selectIndustry(index,industry)" class="cursor">{{industry.parentName}}</span>
          </li>
        </ul>
      </div>
      <div class="sub-industry">
      
      </div>
    </div>
  </div>
</template>
<script>
  
  export default {
    name: 'industries',
    data() {
      return {
        industrySelect: 0,
        moveDistance: 0,
        maxWidth: 1600,
        moveRecord: 0,
        EACH_WIDTH: 85
      }
    },
    computed: {
      industries() {
        return this.$store.state.common.industries
      },
      maxLength() {
        return this.$store.state.common.industries.length + 1
      }
    },
    created() {
      if (!this.industries.length) {
        this.$store.dispatch('common/getIndustries')
      }
    },
    methods: {
      selectIndustry(index, industry) {
        this.industrySelect = index
      },
      arrowLeft() {
        if (this.moveRecord >= (this.maxLength - 10)) return
        this.moveRecord++
        this.moveDistance -= this.EACH_WIDTH
      },
      arrowRight() {
        if (!this.moveRecord) return
        this.moveRecord--
        this.moveDistance += this.EACH_WIDTH
      }
    },
    components: {}
  }
</script>
<style lang='scss' scoped rel='stylesheet/scss' type='text/scss'>
  @import "src/styles/variables.scss";
  
  .industries {
    display: inline-block;
  }
  
  .tag {
    display: inline-block;
    margin-top: 2px;
    margin-right: 2px;
    line-height: 16px;
    padding: 4px 9px;
    color: white;
    font-weight: normal;
    background-color: $btn;
    font-size: 12px;
    border-radius: 4px;
  }
  
  .tag-panel {
    background-color: #f0f0f0;
    width: 800px;
    padding: 0 5px;
    position: relative;
  }
  
  .industry-panel {
    height: 50px;
    line-height: 50px;
    overflow: hidden;
    position: relative;
    ul {
      padding-left: 15px;
      position: absolute;
    }
    li {
      padding: 0 15px;
      height: 50px;
      max-width: 85px;
      span {
        color: rgba(98, 98, 98, 0.7);
      }
      &.active {
        border-bottom: 3px solid $mainBg;
        span {
          color: #000;
        }
      }
    }
  }
  
  .arrow {
    width: 20px;
    margin-top: 10px;
    margin-left: -5px;
    font-size: 16px;
    line-height: 30px;
    position: absolute;
    height: 30px;
    z-index: 10;
    background-color: #e6e6e6;
    &.el-icon-caret-right {
      text-align: right;
      right: 0;
    }
  }
  
  .sub-industry {
    background-color: #fff;
    padding-bottom: 5px;
  }
</style>
